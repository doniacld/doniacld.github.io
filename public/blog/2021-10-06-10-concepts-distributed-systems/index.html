<!DOCTYPE html>
<html lang="en-us" data-theme="light">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="color-scheme" content="light dark">

<title>10 concepts you should know about distributed systems | Donia Chaiehloudj</title>
<meta name="description" content="Software Developer | Go Enthusiast | Speaker | Community Builder">

<meta name="author" content="Donia Chaiehloudj">


<meta property="og:title" content="10 concepts you should know about distributed systems">
<meta property="og:description" content="Software Developer | Go Enthusiast | Speaker | Community Builder">
<meta property="og:type" content="article">
<meta property="og:url" content="http://localhost:1313/blog/2021-10-06-10-concepts-distributed-systems/">
<meta property="og:site_name" content="Donia Chaiehloudj">


<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="10 concepts you should know about distributed systems">
<meta name="twitter:description" content="Software Developer | Go Enthusiast | Speaker | Community Builder">


<link rel="canonical" href="http://localhost:1313/blog/2021-10-06-10-concepts-distributed-systems/">



<link rel="icon" href="/favicon.ico" sizes="any">
<link rel="icon" href="/favicon.svg" type="image/svg+xml">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">



<link rel="stylesheet" href="/css/main.min.8980b538d0a6c4057a102740aff55a04160ed2a2159ad9372592a83ed8697f9a.css" integrity="sha256-iYC1ONCmxAV6ECdAr/VaBBYO0qIVmtk3JZKoPthpf5o=">





<script>
  (function() {
    const theme = localStorage.getItem('theme') || 
      (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
    document.documentElement.setAttribute('data-theme', theme);
  })();
</script>
</head>
<body>
  <a href="#main-content" class="skip-link">Skip to content</a><header class="site-header">
  <div class="container container--wide">
    <div class="site-header__inner">
      <div class="site-header__left">
        <a href="http://localhost:1313/" class="site-title">doniacld</a>
        <button class="theme-toggle" aria-label="Toggle dark mode">
          <svg class="icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="5"></circle>
            <line x1="12" y1="1" x2="12" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="23"></line>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
            <line x1="1" y1="12" x2="3" y2="12"></line>
            <line x1="21" y1="12" x2="23" y2="12"></line>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
          </svg>
          <svg class="icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
          </svg>
        </button>
      </div>
      
      <nav class="site-nav" aria-label="Main navigation">
        <button class="nav-toggle" aria-expanded="false" aria-controls="nav-menu" aria-label="Toggle navigation">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
          </svg>
        </button>
        
        <ul class="site-nav__list" id="nav-menu">
          <li>
            <a href="/blog/" class="site-nav__link">
              Blog
            </a>
          </li>
          <li>
            <a href="/talks/" class="site-nav__link">
              Talks
            </a>
          </li>
          <li>
            <a href="/podcasts/" class="site-nav__link">
              Podcasts
            </a>
          </li>
          <li>
            <a href="/projects/" class="site-nav__link">
              Projects
            </a>
          </li>
          <li>
            <a href="/book/" class="site-nav__link">
              Book
            </a>
          </li>
          <li>
            <a href="/about/" class="site-nav__link">
              About
            </a>
          </li>
        </ul>
        
        <button type="button" class="search-trigger" aria-label="Search" aria-expanded="false" aria-controls="search-panel">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
          </svg>
        </button>
      </nav>
    </div>
  </div>
</header>


<div id="search-panel" class="search-panel" hidden>
  <div class="search-panel__overlay"></div>
  <div class="search-panel__content">
    <div class="search-panel__header">
      <div class="search-panel__input-wrapper">
        <svg class="search-panel__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <circle cx="11" cy="11" r="8"></circle>
          <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
        </svg>
        <input 
          type="search" 
          id="global-search-input" 
          class="search-panel__input" 
          placeholder="Search content..." 
          aria-label="Search content"
          autocomplete="off"
        >
        <button type="button" class="search-panel__close" aria-label="Close search">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      
      
      <div class="search-panel__tags">
        <span class="search-panel__tags-label">Browse by tag:</span>
        <a href="/tags/" class="search-panel__tags-link">View all tags →</a>
      </div>
    </div>
    
    <div class="search-panel__results" id="search-results">
      <div class="search-panel__hint">
        <p>Type to search across all content</p>
        <div class="search-panel__shortcuts">
          <span><kbd>↵</kbd> to select</span>
          <span><kbd>esc</kbd> to close</span>
        </div>
      </div>
    </div>
  </div>
</div>
<main id="main-content">
<div class="container">
  <article class="article">
    <header class="article__header">
      <h1 class="article__title">10 concepts you should know about distributed systems</h1>
      <div class="article__meta">
        <time datetime="2021-10-06">October 6, 2021</time>
        
        <span class="tags">
          
          <a href="/tags/cloud/" class="tag">cloud</a>
          
        </span>
        
      </div>
    </header>
    
    
    
    <aside class="toc">
      <p class="toc__title">Table of Contents</p>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#1-distributed-system">1. Distributed System</a>
      <ul>
        <li><a href="#distributed-systems-are-a-collection-of-independent-computers-that-appears-to-its-user-as-a-single-computer">Distributed systems are a collection of independent computers that appears to its user as a single computer.</a></li>
      </ul>
    </li>
    <li><a href="#2-availability">2. Availability</a></li>
    <li><a href="#3-horizontal-scalability">3. Horizontal scalability</a></li>
    <li><a href="#4-low-latency">4. Low latency</a></li>
    <li><a href="#5-load-balancing">5. Load balancing</a></li>
    <li><a href="#6-caching">6. Caching</a></li>
    <li><a href="#7-replication">7. Replication</a></li>
    <li><a href="#8-sharding">8. Sharding</a></li>
    <li><a href="#9-monitoring">9. Monitoring</a></li>
    <li><a href="#10-observability">10. Observability</a></li>
    <li><a href="#to-go-further">To go further</a></li>
  </ul>
</nav>
    </aside>
    
    
    <div class="article__content">
      <h2 id="1-distributed-system">1. Distributed System</h2>
<p>Before deep diving into concepts, let&rsquo;s define what a distributed system is. The best definition is from Tim Berglund in an O&rsquo;Reilly lesson: <em>&ldquo;distributed systems […] are a collection of <strong>independent computers</strong> that appears to its user as a single computer&rdquo;</em>.</p>
<blockquote>
<h3 id="distributed-systems-are-a-collection-of-independent-computers-that-appears-to-its-user-as-a-single-computer">Distributed systems are a collection of independent computers that appears to its user as a single computer.</h3>
</blockquote>
<h2 id="2-availability">2. Availability</h2>
<p>A system is available when service interruption is minimal which means downtime and failures are punctual.</p>
<p>To quantify service availability, indicator setup is a prerequisite. In <a href="https://cloud.google.com/blog/products/devops-sre/sre-fundamentals-slis-slas-and-slos">Service Reliability Engineering (SRE) terms</a>, it is named <strong>Service-Level Indicator</strong> (SLI). Common examples of SLI are: <strong>latency, responsiveness, error rates</strong>. Based on these indicators,
it is possible to define a numbered internal target, the <strong>Service-Level Objective</strong> (SLO).
Then, the <strong>Service-Level Agreement</strong> (SLA), which can be defined as the uptime system percentage on a time window promised to a customer, will be compared to the SLO.</p>
<blockquote>
<p>SLA: agreed with the client<br>
SLO: internal target<br>
SLI: real measure of the service availability</p>
</blockquote>
<h2 id="3-horizontal-scalability">3. Horizontal scalability</h2>
<p>Scaling is involved when the limit (number of requests, CPU, RAM, …) a resource can handle is reached.
Components are <strong>duplicated</strong> and available in the pool of resources.
Scalability is used at different layers: <strong>network, service, database</strong>.</p>
<p><img src="distributed-system-3-scalability.png" alt="Scalability">
<em>Vertical and horizontal database scaling schema by doniacld</em></p>
<h2 id="4-low-latency">4. Low latency</h2>
<p>Latency is the amount of time the system takes to process a request, measured most often in milliseconds.
To reach the low latency, possible solutions are caching or Content Delivery Network (CDN).</p>
<h2 id="5-load-balancing">5. Load balancing</h2>
<p>A load balancer distributes requests between services, by appearing as a single entrypoint to the caller.
It provides easy scalability and availability features. Note that a multitude of algorithms exist behind the decision-making.
One of the most used is <a href="https://en.wikipedia.org/wiki/Round-robin_scheduling">Round Robin</a>.</p>
<p><img src="distributed-system-5-load-balancing.jpg" alt="Load Balancing">
<em>Load balancer example by doniacld</em></p>
<h2 id="6-caching">6. Caching</h2>
<p>Caching is <strong>copying data in temporary storage</strong> to accelerate memory access. Web browsers and CDN servers cache content that is seldom updated. By reducing the latency and the load on the backend server, we increase the customer success.</p>
<p>Temporary storage means evicting outdated content by using a strategy such as First In First out (FIFO), Least Recently Used (LRU) or Least Frequently Used (LFU) to mention just a few. Redis and Memcache are frequently used as hot/cache databases.</p>
<h2 id="7-replication">7. Replication</h2>
<p>Replication consists in sharing data while maintaining consistency between redundant resources.
It is used when high availability and accessibility are required.
The continuous replication can be synchronous or asynchronous. It depends on the necessary level of consistency associated with the system design architecture.</p>
<h2 id="8-sharding">8. Sharding</h2>
<p>Sharding refers to <strong>distributing the data storage</strong> among several instances of a database in order to make horizontal scaling and replication possible. Here are different types of sharding strategies:</p>
<ul>
<li>key based sharding</li>
<li>range based sharding</li>
<li>directory based sharding</li>
</ul>
<p>Some applications natively handle sharding such as Cassandra or MongoDB whereas Redis and Memcache are non-natively sharded.</p>
<p><img src="distributed-system-8-sharding.png" alt="Sharding">
<em>Key based sharding example from DigitalOcean</em></p>
<h2 id="9-monitoring">9. Monitoring</h2>
<p>Monitoring consists in <em>collecting, processing, aggregating, and displaying real-time quantitative data about a system, such as query counts and types, error counts and types, processing times, and server lifetimes</em>. *
There are two types of monitoring: <strong>black box and white box</strong>. In black box monitoring, you get the same level of information as an end user. In white box monitoring, the system knows infrastructure and code details.</p>
<p>The four golden signals are: <strong>latency, traffic, errors, saturation</strong>.</p>
<p>Monitoring is not only useful to proactively detect abnormal system behaviour but also to retrieve information in order to analyse customer needs.</p>
<h2 id="10-observability">10. Observability</h2>
<p>A system is observable when there are sensors translating its behaviours and activities, so that it can be evaluated based on this output. The system should generate data in three formats to make the observability exploitable: <strong>event logs, metrics, and traces</strong>.</p>
<h2 id="to-go-further">To go further</h2>
<p><a href="https://www.oreilly.com/content/distributed-systems-a-quick-and-simple-definition">Distributed systems: A quick and simple definition</a><br>
<a href="http://www.vlsifacts.com/reliability-vs-availability-in-fault-tolerance/">Reliability vs availability in fault tolerance</a><br>
<a href="https://www.freecodecamp.org/news/systems-design-for-interviews">System design for interviews</a><br>
<a href="https://igotanoffer.com/blogs/tech/load-balancing-system-design-interview">Load balancing for system design interview</a><br>
<a href="https://www.cloudflare.com/learning/cdn/what-is-caching">What is caching ?</a><br>
<a href="https://medium.com/@jeeyoungk/how-sharding-works-b4dec46b3f6">How sharding works ?</a><br>
<a href="https://www.mongodb.com/features/database-sharding-explained">MongoDB: database sharding explained</a><br>
<a href="https://sre.google/sre-book/monitoring-distributed-systems/">SRE book: monitoring for distributed systems</a><br>
<a href="https://www.sumologic.com/glossary/observability/">Glossary SummoLogic: Observability</a><br>
<a href="https://iamondemand.com/blog/distributed-monitoring-101/">I Am On Demand: Distributed monitoring 101</a></p>
<p>*<em><a href="https://www.oreilly.com/library/view/site-reliability-engineering/9781491929117/ch06.html">Site Reliability Engineering</a> by Rob Ewaschuk published by O&rsquo;Reilly</em></p>

    </div>
    
    
    
    
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
    
    
    
    
    
    <nav class="article__nav" aria-label="Post navigation">
      
      
      <a href="http://localhost:1313/blog/2021-11-05-hacktoberfest-2021/" class="article__nav-link article__nav-link--next">
        <span class="article__nav-label">Next →</span>
        <span class="article__nav-title">ChangeBlogging my first Hacktoberfest 2021</span>
      </a>
      
    </nav>
    
  </article>
</div>

  </main><footer class="site-footer">
  <div class="container">
    <div class="site-footer__inner">
      <p class="site-footer__copy">
        &copy; 2026 Donia Chaiehloudj. All rights reserved.
      </p>
      
      <ul class="social-links">
        <li>
          <a href="https://github.com/doniacld" target="_blank" rel="noopener noreferrer" aria-label="GitHub">
<svg viewBox="0 0 24 24" fill="currentColor">
  <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
</svg>

          </a>
        </li>
        <li>
          <a href="https://www.linkedin.com/in/donia-chaiehloudj" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn">
<svg viewBox="0 0 24 24" fill="currentColor">
  <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
</svg>

          </a>
        </li>
        <li>
          <a href="https://bsky.app/profile/doniacld.bsky.social" target="_blank" rel="noopener noreferrer" aria-label="Bluesky">
<svg viewBox="0 0 24 24" fill="currentColor">
  <path d="M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 1.565.139 1.908 0 3.08 0 3.768c0 .69.378 5.65.624 6.479.815 2.736 3.713 3.66 6.383 3.364.136-.02.275-.039.415-.056-.138.022-.276.04-.415.056-3.912.58-7.387 2.005-2.83 7.078 5.013 5.19 6.87-1.113 7.823-4.308.953 3.195 2.05 9.271 7.733 4.308 4.267-4.308 1.172-6.498-2.74-7.078a8.741 8.741 0 0 1-.415-.056c.14.017.279.036.415.056 2.67.297 5.568-.628 6.383-3.364.246-.828.624-5.79.624-6.478 0-.69-.139-1.861-.902-2.206-.659-.298-1.664-.62-4.3 1.24C16.046 4.748 13.087 8.687 12 10.8Z"/>
</svg>

          </a>
        </li>
        <li>
          <a href="https://hachyderm.io/@doniacld" target="_blank" rel="noopener noreferrer" aria-label="Mastodon">
<svg viewBox="0 0 24 24" fill="currentColor">
  <path d="M23.268 5.313c-.35-2.578-2.617-4.61-5.304-5.004C17.51.242 15.792 0 11.813 0h-.03c-3.98 0-4.835.242-5.288.309C3.882.692 1.496 2.518.917 5.127.64 6.412.61 7.837.661 9.143c.074 1.874.088 3.745.26 5.611.118 1.24.325 2.47.62 3.68.55 2.237 2.777 4.098 4.96 4.857 2.336.792 4.849.923 7.256.38.265-.061.527-.132.786-.213.585-.184 1.27-.39 1.774-.753a.057.057 0 0 0 .023-.043v-1.809a.052.052 0 0 0-.02-.041.053.053 0 0 0-.046-.01 20.282 20.282 0 0 1-4.709.545c-2.73 0-3.463-1.284-3.674-1.818a5.593 5.593 0 0 1-.319-1.433.053.053 0 0 1 .066-.054c1.517.363 3.072.546 4.632.546.376 0 .75 0 1.125-.01 1.57-.044 3.224-.124 4.768-.422.038-.008.077-.015.11-.024 2.435-.464 4.753-1.92 4.989-5.604.008-.145.03-1.52.03-1.67.002-.512.167-3.63-.024-5.545zm-3.748 9.195h-2.561V8.29c0-1.309-.55-1.976-1.67-1.976-1.23 0-1.846.79-1.846 2.35v3.403h-2.546V8.663c0-1.56-.617-2.35-1.848-2.35-1.112 0-1.668.668-1.67 1.977v6.218H4.822V8.102c0-1.31.337-2.35 1.011-3.12.696-.77 1.608-1.164 2.74-1.164 1.311 0 2.302.5 2.962 1.498l.638 1.06.638-1.06c.66-.999 1.65-1.498 2.96-1.498 1.13 0 2.043.395 2.74 1.164.675.77 1.012 1.81 1.012 3.12z"/>
</svg>

          </a>
        </li>
        <li>
          <a href="https://doniacld.medium.com/" target="_blank" rel="noopener noreferrer" aria-label="Medium">
<svg viewBox="0 0 24 24" fill="currentColor">
  <path d="M13.54 12a6.8 6.8 0 01-6.77 6.82A6.8 6.8 0 010 12a6.8 6.8 0 016.77-6.82A6.8 6.8 0 0113.54 12zM20.96 12c0 3.54-1.51 6.42-3.38 6.42-1.87 0-3.39-2.88-3.39-6.42s1.52-6.42 3.39-6.42 3.38 2.88 3.38 6.42M24 12c0 3.17-.53 5.75-1.19 5.75-.66 0-1.19-2.58-1.19-5.75s.53-5.75 1.19-5.75C23.47 6.25 24 8.83 24 12z"/>
</svg>

          </a>
        </li>
        <li>
          <a href="/index.xml" target="_blank" rel="noopener noreferrer" aria-label="RSS">
<svg viewBox="0 0 24 24" fill="currentColor">
  <path d="M19.199 24C19.199 13.467 10.533 4.8 0 4.8V0c13.165 0 24 10.835 24 24h-4.801zM3.291 17.415c1.814 0 3.293 1.479 3.293 3.295 0 1.813-1.479 3.29-3.293 3.29C1.479 24 0 22.523 0 20.71c0-1.816 1.479-3.295 3.291-3.295zM15.909 24h-4.665c0-6.169-5.075-11.245-11.244-11.245V8.09c8.727 0 15.909 7.184 15.909 15.91z"/>
</svg>

          </a>
        </li>
      </ul>
    </div>
  </div>
</footer>
<script>
(function() {
  
  const themeToggle = document.querySelector('.theme-toggle');
  
  function setTheme(theme) {
    document.documentElement.setAttribute('data-theme', theme);
    localStorage.setItem('theme', theme);
  }
  
  themeToggle.addEventListener('click', function() {
    const currentTheme = document.documentElement.getAttribute('data-theme');
    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
    setTheme(newTheme);
  });
  
  
  window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function(e) {
    if (!localStorage.getItem('theme')) {
      setTheme(e.matches ? 'dark' : 'light');
    }
  });
  
  
  const navToggle = document.querySelector('.nav-toggle');
  const navMenu = document.querySelector('.site-nav__list');
  
  if (navToggle && navMenu) {
    navToggle.addEventListener('click', function() {
      const expanded = navToggle.getAttribute('aria-expanded') === 'true';
      navToggle.setAttribute('aria-expanded', !expanded);
      navMenu.classList.toggle('is-open');
    });
    
    
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape' && navMenu.classList.contains('is-open')) {
        navToggle.setAttribute('aria-expanded', 'false');
        navMenu.classList.remove('is-open');
        navToggle.focus();
      }
    });
  }
  
  
  const searchTrigger = document.querySelector('.search-trigger');
  const searchPanel = document.getElementById('search-panel');
  const searchInput = document.getElementById('global-search-input');
  const searchResults = document.getElementById('search-results');
  const searchClose = document.querySelector('.search-panel__close');
  const searchOverlay = document.querySelector('.search-panel__overlay');
  
  let searchIndex = null;
  let searchTimeout = null;
  
  async function loadSearchIndex() {
    if (searchIndex) return searchIndex;
    try {
      const response = await fetch('/index.json');
      searchIndex = await response.json();
      return searchIndex;
    } catch (error) {
      console.error('Failed to load search index:', error);
      return [];
    }
  }
  
  function openSearch() {
    if (!searchPanel || !searchInput) return;
    searchPanel.hidden = false;
    searchInput.focus();
    document.body.style.overflow = 'hidden';
    loadSearchIndex();
  }
  
  function closeSearch() {
    if (!searchPanel || !searchInput || !searchResults) return;
    searchPanel.hidden = true;
    searchInput.value = '';
    document.body.style.overflow = '';
    searchResults.innerHTML = `
      <div class="search-panel__hint">
        <p>Type to search across all content</p>
        <div class="search-panel__shortcuts">
          <span><kbd>↵</kbd> to select</span>
          <span><kbd>esc</kbd> to close</span>
        </div>
      </div>
    `;
  }
  
  function performSearch(query) {
    if (!searchIndex || !query.trim()) {
      searchResults.innerHTML = `
        <div class="search-panel__hint">
          <p>Type to search across all content</p>
          <div class="search-panel__shortcuts">
            <span><kbd>↵</kbd> to select</span>
            <span><kbd>esc</kbd> to close</span>
          </div>
        </div>
      `;
      return;
    }
    
    const q = query.toLowerCase();
    const results = searchIndex.filter(item => 
      item.title.toLowerCase().includes(q) || 
      (item.summary && item.summary.toLowerCase().includes(q)) ||
      (item.tags && item.tags.some(tag => tag.toLowerCase().includes(q)))
    );
    
    if (results.length === 0) {
      searchResults.innerHTML = `
        <div class="search-panel__no-results">
          <p>No results found for "${query}"</p>
        </div>
      `;
      return;
    }
    
    const sectionLabels = {
      blog: 'Blog',
      talks: 'Talk',
      podcasts: 'Podcast',
      projects: 'Project',
      about: 'About'
    };
    
    searchResults.innerHTML = `
      <ul class="search-panel__results-list">
        ${results.slice(0, 10).map(item => `
          <li>
            <a href="${item.url}" class="search-result">
              <div class="search-result__section">${sectionLabels[item.section] || item.section}</div>
              <div class="search-result__title">${highlightMatch(item.title, query)}</div>
              ${item.summary ? `<div class="search-result__summary">${highlightMatch(item.summary, query)}</div>` : ''}
            </a>
          </li>
        `).join('')}
      </ul>
      ${results.length > 10 ? `<p style="text-align: center; color: var(--color-muted); font-size: var(--font-size-sm); padding-top: var(--space-4);">Showing 10 of ${results.length} results</p>` : ''}
    `;
  }
  
  function highlightMatch(text, query) {
    if (!query) return text;
    const regex = new RegExp(`(${query.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')})`, 'gi');
    return text.replace(regex, '<mark>$1</mark>');
  }
  
  
  if (searchTrigger) {
    searchTrigger.addEventListener('click', openSearch);
  }
  
  if (searchClose) {
    searchClose.addEventListener('click', closeSearch);
  }
  
  if (searchOverlay) {
    searchOverlay.addEventListener('click', closeSearch);
  }
  
  if (searchInput) {
    searchInput.addEventListener('input', function() {
      clearTimeout(searchTimeout);
      searchTimeout = setTimeout(() => performSearch(this.value), 150);
    });
  }
  
  
  document.addEventListener('keydown', function(e) {
    
    if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
      e.preventDefault();
      if (searchPanel.hidden) {
        openSearch();
      } else {
        closeSearch();
      }
    }
    
    
    if (e.key === 'Escape' && !searchPanel.hidden) {
      closeSearch();
    }
  });
})();
</script>
</body>
</html>
